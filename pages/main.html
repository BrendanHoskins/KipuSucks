<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KipuSucks - Client Data Extractor</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üè• KipuSucks Client Data Extractor</h1>
            <p>Extract client data from Kipu occupancy reports</p>
        </header>

        <main>
            <div class="card">
                <h2>Client List Extraction</h2>
                <p>Click the button below to navigate to Kipu and extract the client list from the occupancy board.</p>
                
                <div class="button-row">
                    <button id="getClientListBtn" class="btn primary">
                        <span class="btn-text">Get Client List</span>
                        <span class="btn-loader" style="display: none;">‚è≥</span>
                    </button>
                    <button id="importCravingsBtn" class="btn secondary">üìã Import Cravings</button>
                    <button id="importShiftNotesBtn" class="btn secondary">üìù Import Shift Notes</button>
                </div>

                <div id="status" class="status"></div>
            </div>

            <div class="card results-card" id="resultsCard" style="display: none;">
                <h3>Extracted Client Data</h3>
                <div id="clientCount" class="client-count"></div>
                <div id="clientList" class="client-list"></div>
                <div class="actions-row">
                    <button id="enhanceBtn" class="btn primary ai-btn">
                        <span class="btn-text">ü§ñ Enhance with AI</span>
                        <span class="btn-loader" style="display: none;">‚è≥</span>
                    </button>
                    <button id="saveInKipuBtn" class="btn primary">Save in Kipu</button>
                    <button id="settingsBtn" class="btn secondary">Settings</button>
                    <button id="deleteDataBtn" class="btn secondary danger">Delete Client Data</button>
                    <div id="aiTooltip" class="tooltip" style="display:none;">Input API key!</div>
                </div>
                <div id="settingsPanel" class="settings-panel" style="display:none;">
                    <div class="settings-row">
                        <label for="apiKeyInput">OpenAI API Key</label>
                        <input type="password" id="apiKeyInput" placeholder="sk-...">
                    </div>
                    <div class="settings-row">
                        <label for="modelSelect">Model</label>
                        <select id="modelSelect">
                            <option value="gpt-4o-mini">gpt-4o-mini</option>
                            <option value="gpt-4o">gpt-4o</option>
                            <option value="gpt-4-turbo">gpt-4-turbo</option>
                            <option value="gpt-3.5-turbo">gpt-3.5-turbo</option>
                        </select>
                    </div>
                    <div class="settings-actions">
                        <button id="saveSettingsBtn" class="btn secondary">Save</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Import Cravings Modal -->
    <div id="cravingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="closeCravingsModal">&times;</span>
            <h2>Import Morning Opener Cravings</h2>
            <p>Paste the morning opener text blob below. The system will automatically parse craving levels and match them to clients.</p>
            <textarea id="cravingsTextarea" placeholder="Paste morning opener text here..." rows="15" style="width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-family: monospace; font-size: 12px;"></textarea>
            <div class="modal-actions">
                <button id="parseCravingsBtn" class="btn primary">Parse & Import Cravings</button>
                <button id="cancelCravingsBtn" class="btn secondary">Cancel</button>
            </div>
            <div id="cravingsStatus" class="status" style="margin-top: 10px;"></div>
        </div>
    </div>

    <!-- Import Shift Notes Modal -->
    <div id="shiftNotesModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button" id="closeShiftNotesModal">&times;</span>
            <h2>Import Shift Notes</h2>
            <p>Paste the shift notes blob. We'll parse Day and Swing notes per client and store them.</p>
            <textarea id="shiftNotesTextarea" placeholder="Paste shift notes here..." rows="18" style="width: 100%; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 6px; font-family: monospace; font-size: 12px;"></textarea>
            <div class="modal-actions">
                <button id="parseShiftNotesBtn" class="btn primary">Parse & Import Shift Notes</button>
                <button id="cancelShiftNotesBtn" class="btn secondary">Cancel</button>
            </div>
            <div id="shiftNotesStatus" class="status" style="margin-top: 10px;"></div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
